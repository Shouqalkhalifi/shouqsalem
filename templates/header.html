<header class="topbar">
  <style>
    :root {
      --bg: #0f172a;
      --fg: #e2e8f0;
      --muted: #94a3b8;
      --brand: #22c55e;
      --brand-2: #06b6d4;
      --surface: #111827;
      --hover: rgba(255, 255, 255, 0.08);
    }
    * {
      box-sizing: border-box;
    }
    .topbar {
      background: var(--surface);
      color: var(--fg);
      position: sticky;
      top: 0;
      z-index: 50;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }
    .container {
      max-width: 1200px;
      margin: auto;
      padding: 0 16px;
    }
    .row {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .space-between {
      justify-content: space-between;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: var(--fg);
      padding: 10px 0;
      font-weight: 700;
      letter-spacing: 0.3px;
    }
    .brand-badge {
      width: 34px;
      height: 34px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      display: grid;
      place-items: center;
      color: #0b1324;
      font-weight: 900;
    }
    nav {
      display: flex;
      gap: 14px;
      align-items: center;
    }
    nav a {
      color: var(--fg);
      text-decoration: none;
      padding: 8px 10px;
      border-radius: 10px;
    }
    nav a:hover {
      background: var(--hover);
    }
    .search {
      display: flex;
      align-items: center;
      gap: 8px;
      background: #0b1222;
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 12px;
      padding: 6px 10px;
      min-width: 260px;
    }
    .search input {
      background: transparent;
      border: none;
      outline: none;
      color: var(--fg);
      width: 100%;
    }
    .btn {
      background: var(--brand);
      color: #08220f;
      border: none;
      cursor: pointer;
      border-radius: 10px;
      padding: 8px 12px;
      font-weight: 700;
    }
    .btn:hover {
      filter: brightness(1.05);
    }
    .icon-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.08);
      color: var(--fg);
      cursor: pointer;
    }
    .icon-btn:hover {
      background: var(--hover);
    }
    .pill {
      background: var(--brand-2);
      color: #06232a;
      border-radius: 999px;
      padding: 6px 10px;
      font-weight: 700;
    }
    .menu-toggle {
      display: none;
    }
    .mobile {
      display: none;
    }
    @media (max-width: 900px) {
      nav {
        display: none;
      }
      .search {
        min-width: unset;
        flex: 1;
      }
      .menu-toggle {
        display: inline-flex;
      }
      .mobile {
        display: block;
        background: #0b1222;
        border-top: 1px solid rgba(255, 255, 255, 0.08);
      }
      .mobile a {
        display: block;
        padding: 12px 16px;
        color: var(--fg);
        text-decoration: none;
      }
      .mobile a:hover {
        background: var(--hover);
      }
    }
  </style>

  <div class="container">
    <div class="row space-between">
      <a class="brand" href="/">
        <span class="brand-badge">S</span>
        <span>Ù…ØªØ¬Ø± Ø´ÙˆÙ‚</span>
      </a>

      <nav aria-label="Ø±ÙˆØ§Ø¨Ø· Ø£Ø³Ø§Ø³ÙŠØ©">
        <a href="/">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="/catalog/">Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬</a>
        <a href="/sales/">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</a>
        <a class="pill" href="/catalog/?type=digital">Ù…Ù†ØªØ¬Ø§Øª Ø±Ù‚Ù…ÙŠØ©</a>
        <a class="pill" href="/catalog/?type=physical">Ø£Ø¬Ù‡Ø²Ø© Ù…Ù„Ù…ÙˆØ³Ø©</a>
      </nav>

      <div class="row">
        <form class="search" method="get" action="/catalog/">
          <input
            type="text"
            name="q"
            placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬..."
            aria-label="Ø¨Ø­Ø«"
          />
          <button class="btn" type="submit">Ø¨Ø­Ø«</button>
        </form>

        <a class="icon-btn" href="/sales/cart/" aria-label="Ø§Ù„Ø³Ù„Ø©"> ðŸ›’ </a>

        {% if request.user.is_authenticated %}
        <span
          >Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ {{ request.user.full_name|default:request.user.username }}
          ðŸ‘‹</span
        >
        <a href="{% url 'identity:logout' %}">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a>
        {% else %}
        <a class="btn" href="/identity/login/">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
        <a
          class="btn"
          style="background: var(--brand-2); color: #06232a"
          href="/identity/register/"
          >Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a
        >
        {% endif %}

        <button
          class="icon-btn menu-toggle"
          type="button"
          onclick="document.getElementById('mnav').classList.toggle('open')"
          aria-label="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"
        >
          â˜°
        </button>
      </div>
    </div>
  </div>

  <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
  <div id="mnav" class="mobile" hidden></div>
  <script>
    (function () {
      const m = document.getElementById("mnav");
      if (!m) return;
      m.innerHTML = `
        <a href="/">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="/catalog/">Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬</a>
        <a href="/sales/">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</a>
        <a href="/catalog/?type=digital">Ù…Ù†ØªØ¬Ø§Øª Ø±Ù‚Ù…ÙŠØ©</a>
        <a href="/catalog/?type=physical">Ø£Ø¬Ù‡Ø²Ø© Ù…Ù„Ù…ÙˆØ³Ø©</a>
        {% if request.user.is_authenticated %}
          <span style="padding:12px 16px; display:block;">ðŸ‘‹ {{ request.user.full_name|default:request.user.username }}</span>
          <a href="/logout/">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a>
        {% else %}
          <a href="/identity/login/">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
          <a href="/identity/register/">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a>
        {% endif %}
      `;
      const btn = document.querySelector(".menu-toggle");
      if (btn) {
        btn.addEventListener("click", () => {
          m.hidden = !m.hidden;
        });
      }
    })();
  </script>
</header>
