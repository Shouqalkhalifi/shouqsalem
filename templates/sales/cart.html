{% extends 'base.html' %}سلة المشتريات | متجر شوق {% block content %}
<div class="py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="section-title mb-0">سلة المشتريات</h2>
  </div>

  {% if messages %}
  <div class="mb-3">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} mb-2">{{ message }}</div>
    {% endfor %}
  </div>
  {% endif %} {% if items %}
  <div class="card shadow-sm">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table align-middle">
          <thead>
            <tr>
              <th>المنتج</th>
              <th class="text-center">الكمية</th>
              <th class="text-center">الوزن</th>
              <th class="text-end">الإجمالي</th>
            </tr>
          </thead>
          <tbody>
            {% for it in items %}
            <tr>
              <td>
                <div class="d-flex align-items-center gap-3">
                  {% if it.product.image %}
                  <img
                    src="{{ it.product.image.url }}"
                    alt="{{ it.product.name }}"
                    width="56"
                    height="56"
                    class="rounded object-fit-cover"
                  />
                  {% endif %}
                  <div>
                    <div class="fw-semibold">{{ it.product.name }}</div>
                    <div class="text-muted small">
                      سعر الوحدة: {{ it.product.price }} ر.س
                    </div>
                  </div>
                </div>
              </td>
              <td class="text-center">{{ it.qty }}</td>
              <td class="text-center">
                {% if it.product.weight %} {{ it.product.weight }} كجم {% else
                %} - {% endif %}
              </td>
              <td class="text-end">{{ it.line_total }} ر.س</td>
            </tr>
            {% endfor %}
          </tbody>
          <tfoot>
            <tr>
              <th colspan="3" class="text-end">المجموع</th>
              <th class="text-end">{{ total }} ر.س</th>
            </tr>
          </tfoot>
        </table>
      </div>
      <div class="d-flex justify-content-between mt-3">
        <a href="/catalog/" class="btn btn-outline-secondary">
          <i class="fas fa-arrow-right me-1"></i> متابعة التسوق
        </a>
        <a href="#" class="btn btn-primary" disabled>إتمام الشراء</a>
      </div>
    </div>
  </div>
  {% else %}
  <div class="text-center text-muted py-5 border rounded-3 bg-white">
    <i class="fas fa-shopping-cart fa-3x mb-3"></i>
    <p class="mb-0">لا توجد منتجات في السلة حالياً</p>
  </div>
  {% endif %}
</div>
{% endblock %}
